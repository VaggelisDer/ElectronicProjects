Version 4
SHEET 1 1640 2676
WIRE 32 96 16 96
WIRE 208 96 32 96
WIRE 912 96 208 96
WIRE 1328 96 912 96
WIRE 32 128 32 96
WIRE 592 208 560 208
WIRE 208 224 208 96
WIRE 560 224 560 208
WIRE 912 240 912 96
WIRE 592 256 592 208
WIRE 560 272 336 272
WIRE 672 288 624 288
WIRE 800 288 672 288
WIRE 848 288 800 288
WIRE 560 304 528 304
WIRE 688 320 592 320
WIRE 800 320 800 288
WIRE 528 384 528 304
WIRE 592 384 528 384
WIRE 672 384 672 288
WIRE 912 400 912 336
WIRE 208 416 208 304
WIRE 336 464 336 272
WIRE 336 464 256 464
WIRE 912 464 912 400
WIRE 1072 464 912 464
WIRE 528 496 528 464
WIRE 208 576 208 496
WIRE 912 592 912 544
WIRE 96 736 0 736
WIRE 384 736 96 736
WIRE 656 736 384 736
WIRE 976 736 656 736
WIRE 1120 736 976 736
WIRE 1328 736 1120 736
WIRE 96 800 96 736
WIRE 976 800 976 736
WIRE 656 848 656 736
WIRE 1328 848 1328 736
WIRE 384 864 384 736
WIRE 1120 864 1120 736
WIRE 352 880 304 880
WIRE 1088 880 1040 880
WIRE 496 896 416 896
WIRE 592 896 496 896
WIRE 1216 896 1152 896
WIRE 1264 896 1216 896
WIRE 96 912 96 880
WIRE 352 912 96 912
WIRE 976 912 976 880
WIRE 1088 912 976 912
WIRE 96 928 96 912
WIRE 976 928 976 912
WIRE 1120 944 1120 928
WIRE 304 976 304 880
WIRE 656 976 656 944
WIRE 656 976 304 976
WIRE 1040 976 1040 880
WIRE 1328 976 1328 944
WIRE 1328 976 1040 976
WIRE 656 992 656 976
WIRE 1328 992 1328 976
WIRE 1216 1008 1216 960
WIRE 1328 1008 1328 992
WIRE 1328 1008 1264 1008
WIRE 496 1024 496 960
WIRE 656 1024 656 992
WIRE 656 1024 544 1024
WIRE 1264 1024 1264 1008
WIRE 1328 1040 1328 1008
WIRE 96 1056 96 992
WIRE 544 1056 544 1024
WIRE 656 1056 656 1024
WIRE 976 1072 976 992
WIRE 1264 1120 1264 1088
WIRE 1328 1136 1328 1120
WIRE 544 1152 544 1120
WIRE 656 1248 656 1136
WIRE 96 1392 16 1392
WIRE 288 1392 96 1392
WIRE 480 1392 288 1392
WIRE 1328 1392 480 1392
WIRE 1136 1472 944 1472
WIRE 96 1488 96 1392
WIRE 1136 1504 992 1504
WIRE 1136 1536 1040 1536
WIRE 480 1552 480 1392
WIRE 288 1568 288 1392
WIRE 1136 1568 1088 1568
WIRE 256 1584 176 1584
WIRE 368 1600 320 1600
WIRE 416 1600 368 1600
WIRE 96 1616 96 1568
WIRE 256 1616 96 1616
WIRE 96 1648 96 1616
WIRE 288 1648 288 1632
WIRE 944 1648 944 1472
WIRE 992 1648 992 1504
WIRE 1040 1648 1040 1536
WIRE 1088 1648 1088 1568
WIRE 480 1680 480 1648
WIRE 176 1696 176 1584
WIRE 480 1696 480 1680
WIRE 480 1696 176 1696
WIRE 544 1696 480 1696
WIRE 368 1728 368 1664
WIRE 480 1728 480 1696
WIRE 96 1760 96 1712
WIRE 944 1760 944 1728
WIRE 992 1760 992 1728
WIRE 1040 1760 1040 1728
WIRE 1088 1760 1088 1728
WIRE 544 1808 544 1760
WIRE 944 1856 944 1824
WIRE 992 1856 992 1824
WIRE 1040 1856 1040 1824
WIRE 1088 1856 1088 1824
WIRE 480 1872 480 1808
WIRE 1056 2048 1024 2048
WIRE 944 2160 944 2048
WIRE 944 2160 912 2160
WIRE 528 2176 528 2096
WIRE 656 2176 528 2176
WIRE 752 2176 704 2176
WIRE 912 2176 912 2160
WIRE 912 2176 832 2176
WIRE 528 2192 528 2176
WIRE 976 2192 976 2176
WIRE 912 2208 912 2176
WIRE 944 2208 912 2208
WIRE 1056 2224 1056 2048
WIRE 1056 2224 1008 2224
WIRE 1136 2224 1056 2224
WIRE 912 2240 832 2240
WIRE 944 2240 912 2240
WIRE 704 2256 704 2176
WIRE 704 2256 608 2256
WIRE 752 2272 720 2272
WIRE 832 2272 832 2240
WIRE 528 2288 528 2272
WIRE 608 2288 608 2256
WIRE 608 2288 528 2288
WIRE 656 2288 656 2176
WIRE 720 2288 720 2272
WIRE 720 2288 656 2288
WIRE 976 2288 976 2256
WIRE 912 2304 912 2240
WIRE 384 2352 384 2336
WIRE 528 2352 528 2288
WIRE 288 2384 144 2384
WIRE 912 2416 912 2384
WIRE 0 2432 -32 2432
WIRE 80 2432 64 2432
WIRE 288 2432 288 2384
WIRE 384 2432 288 2432
WIRE 480 2432 384 2432
WIRE 288 2448 288 2432
WIRE 144 2528 144 2480
WIRE 176 2528 144 2528
WIRE 240 2528 176 2528
WIRE 528 2528 528 2448
WIRE 288 2624 288 2544
WIRE 176 2640 176 2608
WIRE -32 2672 -32 2432
WIRE 1136 2672 1136 2224
WIRE 1136 2672 -32 2672
FLAG 16 96 VDD
IOPIN 16 96 In
FLAG 208 576 0
FLAG 560 224 0
FLAG 688 320 VDD
IOPIN 688 320 Out
FLAG 528 496 0
FLAG 32 208 0
FLAG 1072 528 0
FLAG 800 384 0
FLAG 0 736 VDD
IOPIN 0 736 In
FLAG 912 592 Sgnd
IOPIN 912 592 BiDir
FLAG 96 1056 0
FLAG 544 1152 0
FLAG 496 1024 0
FLAG 976 1072 0
FLAG 1120 944 0
FLAG 1328 1136 Sgnd
IOPIN 1328 1136 BiDir
FLAG 656 1248 Sgnd
IOPIN 656 1248 BiDir
FLAG 1216 1008 0
FLAG 1264 1120 0
FLAG 16 1392 VDD
IOPIN 16 1392 In
FLAG 96 1760 0
FLAG 288 1648 0
FLAG 368 1728 0
FLAG 544 1808 0
FLAG 480 1872 Sgnd
IOPIN 480 1872 BiDir
FLAG 912 400 Vvar
IOPIN 912 400 BiDir
FLAG 656 992 V24
IOPIN 656 992 BiDir
FLAG 1328 992 V12
IOPIN 1328 992 BiDir
FLAG 1136 1536 V12
IOPIN 1136 1536 BiDir
FLAG 480 1680 V5
IOPIN 480 1680 BiDir
FLAG 1136 1568 V5
IOPIN 1136 1568 BiDir
FLAG 1136 1504 V24
IOPIN 1136 1504 BiDir
FLAG 1136 1472 Vvar
IOPIN 1136 1472 BiDir
FLAG 944 1856 0
FLAG 992 1856 0
FLAG 1040 1856 0
FLAG 528 2096 Sgnd
IOPIN 528 2096 BiDir
FLAG 528 2528 0
FLAG 288 2624 0
FLAG 384 2336 VDD
IOPIN 384 2336 In
FLAG 976 2176 VDD
IOPIN 976 2176 In
FLAG 976 2288 0
FLAG 912 2416 0
FLAG 1088 1856 0
FLAG 176 2640 0
SYMBOL res 192 208 R0
SYMATTR InstName R1
SYMATTR Value 20k
SYMBOL pot 192 400 R0
SYMATTR InstName U1
SYMATTR Value Rtot=10K wiper=1
SYMBOL OpAmps\\UniversalOpAmp 592 288 M180
WINDOW 0 26 -19 Left 2
SYMATTR InstName U2
SYMBOL res 688 368 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 2k
SYMBOL res 544 480 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL npn 848 240 R0
SYMATTR InstName Q1
SYMATTR Value 2N3055
SYMBOL res 896 448 R0
SYMATTR InstName RLvar
SYMATTR Value 111111111111
SYMBOL voltage 32 112 R0
SYMATTR InstName V1
SYMATTR Value 31
SYMBOL cap 1056 464 R0
SYMATTR InstName C1
SYMATTR Value 470µ
SYMBOL cap 784 320 R0
SYMATTR InstName C2
SYMATTR Value 1µ
SYMBOL res 80 784 R0
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL zener 112 992 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value BZX84B24VLY
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL OpAmps\\UniversalOpAmp 384 896 R0
WINDOW 0 26 -19 Left 2
SYMATTR InstName U3
SYMBOL npn 592 848 R0
SYMATTR InstName Q2
SYMATTR Value 2N3055
SYMBOL res 640 1040 R0
SYMATTR InstName RL24
SYMATTR Value {RL24}
SYMBOL cap 528 1056 R0
SYMATTR InstName C3
SYMATTR Value 470µ
SYMBOL cap 480 896 R0
SYMATTR InstName C4
SYMATTR Value 1µ
SYMBOL res 960 784 R0
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL zener 992 992 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value MMBZ12VALY
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL OpAmps\\UniversalOpAmp 1120 896 R0
WINDOW 0 26 -19 Left 2
SYMATTR InstName U4
SYMBOL npn 1264 848 R0
SYMATTR InstName Q3
SYMATTR Value 2N3055
SYMBOL res 1312 1024 R0
SYMATTR InstName RL12
SYMATTR Value RL
SYMBOL cap 1200 896 R0
SYMATTR InstName C5
SYMATTR Value 1µ
SYMBOL cap 1248 1024 R0
SYMATTR InstName C6
SYMATTR Value 470µ
SYMBOL res 80 1472 R0
SYMATTR InstName R6
SYMATTR Value 1k
SYMBOL zener 112 1712 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMATTR Value UMZ5_1N
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL OpAmps\\UniversalOpAmp 288 1600 R0
WINDOW 0 26 -19 Left 2
SYMATTR InstName U5
SYMBOL npn 416 1552 R0
SYMATTR InstName Q4
SYMATTR Value 2N3055
SYMBOL cap 528 1696 R0
SYMATTR InstName C7
SYMATTR Value 470µ
SYMBOL cap 352 1600 R0
SYMATTR InstName C8
SYMATTR Value 1µ
SYMBOL res 464 1712 R0
SYMATTR InstName R7
SYMATTR Value RL
SYMBOL res 928 1632 R0
WINDOW 0 -41 8 Left 2
SYMATTR InstName R8
SYMATTR Value 1k
SYMBOL res 976 1632 R0
WINDOW 0 21 5 Left 2
SYMATTR InstName R9
SYMATTR Value 1k
SYMBOL res 1024 1632 R0
WINDOW 0 21 5 Left 2
SYMATTR InstName R10
SYMATTR Value 1k
SYMBOL res 1072 1632 R0
WINDOW 0 40 14 Left 2
SYMATTR InstName R11
SYMATTR Value 1k
SYMBOL diode 928 1760 R0
SYMATTR InstName D4
SYMATTR Value 1N914
SYMBOL diode 976 1760 R0
SYMATTR InstName D5
SYMATTR Value 1N914
SYMBOL diode 1024 1760 R0
SYMATTR InstName D6
SYMATTR Value 1N914
SYMBOL diode 1072 1760 R0
SYMATTR InstName D7
SYMATTR Value 1N914
SYMBOL res 512 2176 R0
SYMATTR InstName Rshunt
SYMATTR Value 0.1
SYMBOL res 368 2336 R0
SYMATTR InstName R12
SYMATTR Value 10k
SYMBOL npn 80 2384 R0
SYMATTR InstName Q5
SYMATTR Value 2N2222
SYMBOL OpAmps\\UniversalOpAmp 976 2224 R0
WINDOW 0 26 -19 Left 2
SYMATTR InstName U6
SYMBOL res 848 2256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 1k
SYMBOL res 848 2160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 1k
SYMBOL res 928 2400 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R15
SYMATTR Value 20k
SYMBOL res 1040 2032 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 20k
SYMBOL zener 64 2416 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D8
SYMATTR Value 1N750
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL nmos 480 2352 R0
SYMATTR InstName M1
SYMATTR Value IRF7468
SYMBOL nmos 240 2448 R0
SYMATTR InstName M2
SYMATTR Value BSC016N04LS
SYMBOL csw 176 2528 R0
SYMATTR InstName W1
SYMATTR Value Reset SW
TEXT 696 88 Left 2 ;31V
TEXT -40 -224 Left 2 !.include pot.sub
TEXT 560 448 Left 2 ;R2 = R3
TEXT -88 616 Left 2 ;.tran 0 1s 0 0.1
TEXT 856 1432 Left 2 ;-----------------------------------------------
TEXT 856 1432 VRight 2 ;--------------------------------------------------
TEXT 856 1936 Left 2 ;-----------------------------------------------
TEXT 1296 1432 VRight 2 ;--------------------------------------------------
TEXT 856 1416 Left 2 ;Power Leds
TEXT -112 1984 Left 1 ;--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
TEXT 16 1840 Left 2 !.op
TEXT 728 1176 Left 2 !.step param RL24 1 20 1
